@import 'nib'

// Assignee, code copied from wekan/client/users/userAvatar.styl

avatar-radius = 50%

#cardURL_copy
  // Have clipboard text not visible by moving it to far left
  position: absolute
  left: -2000px
  top: 0px

#clipboard
  white-space: normal

.assignee
  border-radius: 3px
  display: block
  position: relative
  float: left
  height: 25px
  width: @height
  margin: 0 4px 4px 0
  cursor: pointer
  user-select: none
  z-index: 1
  text-decoration: none

  .avatar
    overflow: hidden
    border-radius: avatar-radius

    &.avatar-assignee-initials
      height: 60%
      width: @height
      padding: 15%
      background-color: #dbdbdb
      color: #444444
      position: absolute

    &.avatar-image
      object-fit: cover;
      object-position: center;
      height: 100%
      width: @height

  .assignee-presence-status
    background-color: #b3b3b3
    border: 1px solid #fff
    border-radius: 50%
    height: 7px
    width: @height
    position: absolute
    right: -1px
    bottom: -1px
    border: 1px solid white
    z-index: 15

    &.active
      background: #64c464
      border-color: #daf1da

    &.idle
      background: #e4e467
      border-color: #f7f7d4

    &.disconnected
      background: #bdbdbd
      border-color: #ededed

    &.pending
      background: #e44242
      border-color: #f1dada



  &.add-assignee
    display: flex
    align-items: center
    justify-content: center
    box-shadow: 0 0 0 2px darken(white, 25%) inset

    &:hover, &.is-active
      box-shadow: 0 0 0 2px darken(white, 60%) inset

// Other card details

.card-details
  padding: 0
  flex-shrink: 0
  flex-basis: 610px
  will-change: flex-basis
  overflow-y: scroll
  overflow-x: hidden
  background: darken(white, 3%)
  border-radius: bottom 3px
  z-index: 20 !important
  animation: flexGrowIn 0.1s
  box-shadow: 0 0 7px 0 darken(white, 30%)
  transition: flex-basis 0.1s
  box-sizing: border-box

  .mCustomScrollBox
    padding-left: 0

  .ps-scrollbar-y-rail
    pointer-event: all
    position: absolute

  .card-details-canvas
    width: 575px
    padding-left: 20px

  .card-details-header
    margin: 0 -20px 5px;
    padding: 7px 16px;
    background: #E5F1FB;
    color: #2999FF;


    .close-card-details,
    .card-details-menu,
    .card-copy-button,
    .card-copy-mobile-button,
    .close-card-details-mobile-web,
    .card-details-menu-mobile-web
      float: right

    .close-card-details
      font-size: 24px
      padding: 5px
      margin-right: -8px
      color: #2999FF

    .close-card-details-mobile-web
      font-size: 24px
      padding: 5px
      margin-right: 0px
      color: #2999FF

    .card-copy-button
      font-size: 17px
      padding: 10px
      margin-right: 10px
      color: #2999FF

    .card-copy-mobile-button
      font-size: 17px
      padding: 10px
      margin-right: 10px
      color: #2999FF

    .card-details-menu
      font-size: 17px
      padding: 10px
      color: #2999FF

    .card-details-menu-mobile-web
      font-size: 17px
      padding: 10px
      margin-right: 30px
      color: #2999FF

    .card-details-watch
      font-size: 17px
      padding-left: 7px
      color: #a6a6a6


    .card-details-title
      font-weight: normal
      font-size: 18px
      margin: 7px 0 0
      padding: 0

    .linked-card-location
      font-style: italic
      font-size: 1em
      margin-bottom: 0
      & p
        margin-bottom: 0

    form.inlined-form
      margin-top: 5px
      margin-bottom: 10px

    .card-details-list
      font-size: 0.85em
      margin-bottom: 3px

      a.card-details-list-title
        font-weight: bold

        &.is-editable
          display: inline-block
          background: darken(white, 10%)
          border-radius: 3px
          padding: 0px 5px

  .card-description textarea
    min-height: 100px

  .card-details-items
    display: flex
    flex-wrap: wrap
    margin: 15px 0
    .card-details-item
      margin-right: 0.5em
      margin-bottom:25px
      &:last-child
        margin-right: 0
      &.card-details-item-name
        display: block
        word-wrap: break-word
        max-width: 48%
        flex-grow: 1

  .card-details-item-title
    font-size: 16px
    color: #000

  .card-details-item-received
      min-width :23%
      max-width: 23%
  .card-details-item-start
     min-width :23%
     max-width: 23%
  .card-details-item-due
     min-width :23%
     max-width: 23%
  .card-details-item-end
     min-width :23%
     max-width: 23%
  .card-details-item-members
    min-width :48%
    max-width :48%
  .card-details-item-assignees
    min-width :48%
    max-width :48%
  .card-details-item-labels
    width: 100%
  .card-details-item-customfield
    width: 100%
  @media screen and (max-width: 800px)
    .card-details-item-received
      min-width :40%
      max-width: 40%
    .card-details-item-start
      min-width :40%
      max-width: 40%
    .card-details-item-due
      min-width :40%
      max-width: 40%
    .card-details-item-end
      min-width :40%
      max-width: 40%
    .card-details-item-members
      min-width :48%
      max-width :48%
    .card-details-item-assignees
      min-width :48%
      max-width :48%
    .card-details-item-labels
      width: 100%
    .card-details-item-customfield
      width: 100%

  .card-label
    padding-top: 5px
    padding-bottom: 5px

  .activities
    padding-top: 10px

input[type="text"].attachment-add-link-input
  float: left
  margin: 0 0 8px
  width: 80%

input[type="submit"].attachment-add-link-submit
  float: left
  margin: 0 0 8px 4px
  padding: 6px 12px
  width: 18%

@media screen and (max-width: 800px)
  .card-details
    width: calc(100% - 1px)
    padding: 0px 20px 0px 20px
    margin: 0px
    transition: none

    .card-details-canvas
      width: 100%
      padding-left: 0px

    .card-details-header
      .close-card-details
        margin-right: 0px

      .card-details-menu
        margin-right: 10px

card-details-color(background, color...)
  background: background !important
  if color
    color: color !important //overwrite text for better visibility

.card-details-white
  card-details-color(#ffffff, #777777) //Black text for better visibility
  border: 1px solid #eee

.card-details-green
  card-details-color(#EAF7EC, #1EC043) //White text for better visibility

.card-details-yellow
  card-details-color(rgba(250, 217, 0, 0,2), #777777) //Black text for better visibility

.card-details-orange
  card-details-color(#FFF4ED, #FF8D38) //Black text for better visibility

.card-details-red
  card-details-color(#FDEEEC, #F82400) //White text for better visibility

.card-details-purple
  card-details-color(rgba(166, 50, 219, 0.2), #a632db) //White text for better visibility

.card-details-blue
  card-details-color(#E5F1FB,#2999FF) //White text for better visibility

.card-details-pink
  card-details-color(rgba(255, 10, 161, 0.2), #ff0aa1) //Black text for better visibility

.card-details-sky
  card-details-color(rgba(0, 194, 224, 0.2), #777777) //White text for better visibility

.card-details-black
  card-details-color(#777777, #ffffff) //White text for better visibility

.card-details-lime
  card-details-color(rgba(81, 232, 152, 0.2), #777777) //Black text for better visibility

.card-details-silver
  card-details-color(rgba(192, 192, 192, 0.2), #777777) //Black text for better visibility

.card-details-peachpuff
  card-details-color(rgba(255, 218, 185, 0.2), #ff7f0f) //Black text for better visibility

.card-details-crimson
  card-details-color(rgba(220, 20, 60, 0.2), rgba(220, 20, 60, 1)) //White text for better visibility

.card-details-plum
  card-details-color(rgba(221, 160, 221, 0.2), #b441b4) //Black text for better visibility

.card-details-darkgreen
  card-details-color(rgba(0, 100, 0, 0.2), #006400) //White text for better visibility

.card-details-slateblue
  card-details-color(rgba(106, 90, 205, 0.2), #6a5acd) //White text for better visibility

.card-details-magenta
  card-details-color(rgba(255, 0, 255, 0.2), #ff00ff) //White text for better visibility

.card-details-gold
  card-details-color(rgba(255, 215, 0, 0.2), #777777) //Black text for better visibility

.card-details-navy
  card-details-color(rgba(0, 0, 128, 0.2), #000080) //White text for better visibility

.card-details-gray
  card-details-color(rgba(52, 52, 52, 0.2), #343434) //White text for better visibility

.card-details-saddlebrown
  card-details-color(rgba(139, 69, 19, 0.2), #8b4513) //White text for better visibility

.card-details-paleturquoise
  card-details-color(rgba(175, 238, 238, 0.2), #777777 ) //Black text for better visibility

.card-details-mistyrose
  card-details-color(rgba(255, 228, 225, 0.2), #777777 ) //Black text for better visibility

.card-details-indigo
  card-details-color(rgba(75, 0, 130, 0.2), #4b0082) //White text for better visibility

.voted
  opacity: .7
.vote-title
  display: flex
  justify-content: space-between

  .js-edit-date
    align-self: baseline
    margin-left: 5px

.vote-result
  display: flex
.js-show-positive-votes
  cursor: pointer
